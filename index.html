<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#0a0a0f">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>VozMail</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;1,300&family=Syne:wght@400;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0a0f;
    --surface: #13131a;
    --border: #1e1e2e;
    --accent: #e8ff57;
    --text: #e8e8f0;
    --muted: #5a5a7a;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Syne', sans-serif;
    min-height: 100dvh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 36px 24px 40px;
  }
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: radial-gradient(ellipse 60% 40% at 50% 0%, rgba(232,255,87,0.04) 0%, transparent 70%);
    pointer-events: none;
    z-index: 0;
  }
  .content { position: relative; z-index: 1; width: 100%; max-width: 420px; display: flex; flex-direction: column; align-items: center; }

  header { width: 100%; display: flex; align-items: center; justify-content: space-between; margin-bottom: 36px; }
  .logo { font-size: 24px; font-weight: 800; letter-spacing: -0.5px; }
  .logo span { color: var(--accent); }
  .email-badge { font-family: 'DM Mono', monospace; font-size: 10px; color: var(--muted); background: var(--surface); border: 1px solid var(--border); padding: 6px 12px; border-radius: 20px; max-width: 175px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

  /* InstrucciÃ³n */
  .instruction {
    width: 100%;
    background: rgba(232,255,87,0.05);
    border: 1px solid rgba(232,255,87,0.15);
    border-radius: 14px;
    padding: 18px 20px;
    margin-bottom: 24px;
  }
  .instruction p {
    font-family: 'DM Mono', monospace;
    font-size: 13px;
    color: var(--muted);
    line-height: 1.8;
  }
  .instruction p strong { color: var(--accent); }
  .instruction .step {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    margin-bottom: 8px;
  }
  .instruction .step:last-child { margin-bottom: 0; }
  .step-num {
    background: var(--accent);
    color: #0a0a0f;
    font-family: 'Syne', sans-serif;
    font-weight: 800;
    font-size: 11px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-top: 2px;
  }

  /* Textarea */
  .textarea-wrap { width: 100%; position: relative; margin-bottom: 20px; }

  .mic-hint {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    color: var(--muted);
    text-align: center;
    margin-bottom: 10px;
    letter-spacing: 0.03em;
  }

  textarea {
    width: 100%;
    min-height: 160px;
    background: var(--surface);
    border: 2px solid var(--border);
    border-radius: 16px;
    padding: 18px;
    color: var(--text);
    font-family: 'DM Mono', monospace;
    font-size: 15px;
    line-height: 1.7;
    resize: none;
    outline: none;
    transition: border-color 0.3s;
    -webkit-user-select: text;
    user-select: text;
  }
  textarea:focus { border-color: rgba(232,255,87,0.4); }
  textarea::placeholder { color: var(--muted); font-style: italic; }

  /* Mic button grande */
  .mic-big-btn {
    width: 100%;
    padding: 20px;
    background: var(--surface);
    border: 2px dashed rgba(232,255,87,0.25);
    border-radius: 16px;
    color: var(--text);
    font-family: 'Syne', sans-serif;
    font-size: 15px;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    margin-bottom: 20px;
    transition: all 0.2s;
    outline: none;
  }
  .mic-big-btn:active { transform: scale(0.98); background: rgba(232,255,87,0.05); }
  .mic-big-btn svg { flex-shrink: 0; }

  /* Subject preview */
  .subject-preview { width: 100%; background: rgba(232,255,87,0.04); border: 1px solid rgba(232,255,87,0.15); border-radius: 12px; padding: 14px 18px; margin-bottom: 16px; display: none; }
  .subject-preview.visible { display: block; }
  .subject-label { font-family: 'DM Mono', monospace; font-size: 10px; letter-spacing: 0.15em; text-transform: uppercase; color: var(--accent); margin-bottom: 6px; display: block; }
  .subject-value { font-size: 14px; font-weight: 600; line-height: 1.4; }

  /* Send button */
  .send-btn {
    width: 100%;
    padding: 20px;
    background: var(--accent);
    color: #0a0a0f;
    border: none;
    border-radius: 14px;
    font-family: 'Syne', sans-serif;
    font-size: 17px;
    font-weight: 800;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    outline: none;
    transition: all 0.2s;
    margin-bottom: 12px;
  }
  .send-btn:active { transform: scale(0.97); }

  .clear-btn { width: 100%; padding: 14px; background: transparent; color: var(--muted); border: 1px solid var(--border); border-radius: 14px; font-family: 'DM Mono', monospace; font-size: 13px; cursor: pointer; transition: all 0.2s; }
  .clear-btn:active { color: var(--text); }

  .toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(20px); background: var(--surface); border: 1px solid var(--border); color: var(--text); font-family: 'DM Mono', monospace; font-size: 13px; padding: 12px 20px; border-radius: 24px; opacity: 0; transition: all 0.3s; white-space: nowrap; z-index: 200; pointer-events: none; }
  .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

  .char-count { font-family: 'DM Mono', monospace; font-size: 11px; color: var(--muted); text-align: right; margin-top: 6px; }
</style>
</head>
<body>
<div class="toast" id="toast"></div>
<div class="content">

  <header>
    <div class="logo">Voz<span>Mail</span></div>
    <div class="email-badge">lateoriadelvideojuego@gmail.com</div>
  </header>

  <div class="instruction">
    <div class="step">
      <div class="step-num">1</div>
      <p>Toca el Ã¡rea de texto de abajo para abrir el teclado</p>
    </div>
    <div class="step">
      <div class="step-num">2</div>
      <p>Pulsa el <strong>ðŸŽ¤ micrÃ³fono</strong> del teclado y habla</p>
    </div>
    <div class="step">
      <div class="step-num">3</div>
      <p>Pulsa <strong>Enviar por Email</strong></p>
    </div>
  </div>

  <div class="textarea-wrap">
    <div class="mic-hint">â†“ Toca aquÃ­ y usa el ðŸŽ¤ del teclado â†“</div>
    <textarea
      id="msgArea"
      placeholder="Toca aquÃ­, abre el teclado y pulsa el micrÃ³fono ðŸŽ¤ para dictar..."
      oninput="onTextChange()"
      autocomplete="off"
      autocorrect="on"
      spellcheck="true"
    ></textarea>
    <div class="char-count" id="charCount">0 caracteres</div>
  </div>

  <div class="subject-preview" id="subjectPreview">
    <span class="subject-label">Asunto del email</span>
    <div class="subject-value" id="subjectValue"></div>
  </div>

  <button class="send-btn" id="sendBtn" onclick="sendEmail()">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
      <path d="M22 2L11 13M22 2L15 22L11 13L2 9L22 2Z" stroke="#0a0a0f" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    Enviar por Email
  </button>

  <button class="clear-btn" onclick="clearAll()">âœ• Borrar</button>

</div>
<script>
  const USER_EMAIL = 'lateoriadelvideojuego@gmail.com';

  function onTextChange() {
    const text = document.getElementById('msgArea').value.trim();
    const count = document.getElementById('msgArea').value.length;
    document.getElementById('charCount').textContent = count + ' caracteres';

    if (text.length > 5) {
      document.getElementById('subjectValue').textContent = generateSubject(text);
      document.getElementById('subjectPreview').classList.add('visible');
    } else {
      document.getElementById('subjectPreview').classList.remove('visible');
    }
  }

  function sendEmail() {
    const text = document.getElementById('msgArea').value.trim();
    if (!text) {
      showToast('Escribe o dicta un mensaje primero');
      return;
    }
    const subject = document.getElementById('subjectValue').textContent || 'Mensaje de voz';
    const date = new Date().toLocaleDateString('es-ES',{weekday:'long',year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'});
    const body = `${text}\n\nâ€”\nMensaje dictado el ${date}\nVÃ­a VozMail`;
    window.location.href = `mailto:${encodeURIComponent(USER_EMAIL)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    showToast('Abriendo Gmail...');
  }

  function clearAll() {
    document.getElementById('msgArea').value = '';
    document.getElementById('charCount').textContent = '0 caracteres';
    document.getElementById('subjectPreview').classList.remove('visible');
  }

  function generateSubject(text) {
    const clean = text.replace(/\s+/g,' ').trim();
    const first = clean.match(/[^.!?]+[.!?]?/)?.[0]?.trim() || clean;
    if (first.length <= 65) return cap(first);
    const cut = first.substring(0,65);
    const ls = cut.lastIndexOf(' ');
    return cap(ls > 30 ? cut.substring(0,ls)+'â€¦' : cut+'â€¦');
  }

  function cap(s) { return s.charAt(0).toUpperCase() + s.slice(1); }

  function showToast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg; t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 2500);
  }
</script>
</body>
</html>
